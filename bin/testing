#!/usr/bin/env ruby

require File.dirname(__FILE__) + '/../lib/dudley'

module Dudley
  bot = IRC.new(Config[:server][:nick],
                Config[:server][:host],
                Config[:server][:port],
                Config[:server][:realname])

  IRCEvent.add_callback('endofmotd') do |event|
    bot.add_channel('#dnd')
  end

  IRCEvent.add_callback('join') do |event|
    bot.send_message(event.channel, "Hello #{event.from}")
  end

  bot.connect
end
